# 从输入 URL 到页面展示，这中间发生了什么？

</br>

### 1、用户输入

当用户在地址栏中输入一个查询关键字时，浏览器会判断输入的关键字是搜索内容，还是请求的 URL。

1. 如果搜索内容，浏览器会使用默认的搜索引擎，合成一个带搜索关键字的 URL

2. 如果搜索内容符合 URL 规则，那么浏览器会根据规则，加上 http 或 https 协议，合成为完整的 URL

在用户按下回车键之后，还会触发 JS 的 beforeunload 事件，询问用户是否离开当前页面

</br>
</br>

### 2、浏览器进程通过 IPC 机制把 URL 请求发送至网络进程

IPC 机制：多个进程间的通信机制

</br>
</br>

### 3、网络进程会判断该资源是否已经缓存

1. 浏览器第一次请求该资源时，服务器会在 HTTP 响应头中返回 Cache-Control 字段去告诉浏览器是否缓存该资源，通过 Max-age 参数可以设置缓存过期时长

2. 如果该资源命中缓存，会直接返回缓存中的资源给浏览器（code 200）

    - form memory cache：如果该资源加载过，且缓存在了内存当中，直接从内存中读取缓存（浏览器关闭后，数据将不存在）

    - from disk cache：从本地磁盘读取缓存

</br>
</br>

### 4、DNS 域名解析

如果这个 URL 不是一个标准的 IP 地址，还会进行 DNS 域名解析。如果某个域名已经解析过了，那么浏览器会缓存解析的结果，以供下次查询时直接使用

1. 如果命中 DNS 缓存，直接从缓存中获取解析结果

2. 浏览器会请求 DNS 返回该域名对应的 IP，并进行缓存

如果该地址未标明端口号，http 协议默认为 80 端口，https 默认为 443 端口

</br>
</br>

### 5、如果是 HTTPS 协议，还需要先建立 TLS 连接
