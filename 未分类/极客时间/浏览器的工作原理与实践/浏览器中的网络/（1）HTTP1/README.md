# HTTP 性能优化

</br>

### 超文本传输协议 HTTP/0.9

1. 只有一个请求行，并没有 HTTP 请求头和请求体，因为只需要一个请求行就可以完整表达客户端的需求了

2. 第二个是服务器也没有返回头信息，这是因为服务器端并不需要告诉客户端太多信息，只需要返回数据就可以了

3. 第三个是返回的文件内容是以 ASCII 字符流来传输的，因为都是 HTML 格式的文件，所以使用 ASCII 字节码来传输是最合适的

</br>
</br>

### 被浏览器推动的 HTTP/1.0

浏览器中展示的不单是 HTML 文件了，还包括了 JavaScript、CSS、图片、音频、视频等不同类型的文件。因此**支持多种类型的文件下载是 HTTP/1.0 的一个核心诉求**，而且文件格式不仅仅局限于 ASCII 编码，还有很多其他类型编码的文件

1. 通过新增请求头和响应头来进行协商

2. 响应行引入了状态码，用来告诉服务端处理的情况

3. 提供了 Cache 机制，用来缓存已经下载过的数据，减轻服务器的压力

4. 需要使用 Connection: keep-alive 才能支持 TCP 复用

</br>
</br>

### 缝缝补补的 HTTP/1.1

1. 改进持久连接：HTTP/1.1 中增加了持久连接的方法，它的特点是在一个 TCP 连接上可以传输多个 HTTP 请求，只要浏览器或者服务器没有明确断开连接，那么该 TCP 连接会一直保持，**默认是开启的**

2. 虚拟主机的支持：随着虚拟主机技术的发展，需要实现在一台物理主机上绑定多个虚拟主机，每个虚拟主机都有自己的单独的域名，这些单独的域名都公用同一个 IP 地址。HTTP/1.1 在请求头中增加了 Host 字段，用来表示当前的域名地址，这样服务器就可以根据不同的 Host 值做不同的处理

3. 引入了客户端 Cookie 机制和安全机制

</br>
</br>

3. 不成熟的 HTTP 管线化：持久连接虽然能减少 TCP 的建立和断开次数，但是它**需要等待前面的请求返回之后，才能进行下一次请求**。如果 TCP 通道中的某个请求因为某些原因没有及时返回，那么就会阻塞后面的所有请求，这就是著名的**队头阻塞**的问题
