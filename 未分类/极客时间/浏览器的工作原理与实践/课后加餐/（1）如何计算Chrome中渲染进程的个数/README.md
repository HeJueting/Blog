# 浏览上下文组：如何计算 Chrome 中渲染进程的个数？

</br>

### 标签页之间的连接

1. 通过 a 标签来和新标签建立连

2. 通过 JavaScript 中的 window.open 方法来和新标签页建立连接

通过上述两种方式打开的新标签页，不论这两个标签页是否属于同一站点，他们之间都能通过 opener 来建立连接，所以他们之间是有联系的。我们把这一类具有相互连接关系的标签页称为**浏览上下文组**

</br>
</br>

### chrome 创建渲染进行的规则

1. 如果两个标签页都位于同一个浏览上下文组，且属于同一站点，那么这两个标签页会被浏览器分配到同一个渲染进程中

2. 如果这两个条件不能同时满足，那么这两个标签页会分别使用不同的渲染进程来渲染

</br>
</br>

### 一个“例外”

https://linkmarket.aliyun.com/ 内新开的标签页都是新开一个渲染进程，原因就是：当 a 链接的 rel 属性值都使用了 noopener 和 noreferrer，这两个值是让被链接的标签页和当前标签页不要产生连接关系，因此他们不满足浏览器上下文组的规则

```html
<a target="_blank" rel="noopener noreferrer" href="https://linkmarket.aliyun.com/pp/application">应用中心</a>
```

</br>
</br>

### 站点隔离

标签页中的 iframe 也会遵守同一站点的分配原则，如果标签页中的 iframe 和标签页是同一站点，并且有连接关系，那么标签页依然会和当前标签页运行在同一个渲染进程中，如果 iframe 和标签页不属于同一站点，那么 iframe 会运行在单独的渲染进程中

</br>
</br>
